!function(e){if(!e.browser){e.browser={},e.browser.mozilla=!1,e.browser.webkit=!1,e.browser.opera=!1,e.browser.msie=!1;var t=navigator.userAgent;e.browser.name=navigator.appName,e.browser.fullVersion=""+parseFloat(navigator.appVersion),e.browser.majorVersion=parseInt(navigator.appVersion,10);var r,n,a;(n=t.indexOf("Opera"))!=-1?(e.browser.opera=!0,e.browser.name="Opera",e.browser.fullVersion=t.substring(n+6),(n=t.indexOf("Version"))!=-1&&(e.browser.fullVersion=t.substring(n+8))):(n=t.indexOf("MSIE"))!=-1?(e.browser.msie=!0,e.browser.name="Microsoft Internet Explorer",e.browser.fullVersion=t.substring(n+5)):(n=t.indexOf("Chrome"))!=-1?(e.browser.webkit=!0,e.browser.name="Chrome",e.browser.fullVersion=t.substring(n+7)):(n=t.indexOf("Safari"))!=-1?(e.browser.webkit=!0,e.browser.name="Safari",e.browser.fullVersion=t.substring(n+7),(n=t.indexOf("Version"))!=-1&&(e.browser.fullVersion=t.substring(n+8))):(n=t.indexOf("Firefox"))!=-1?(e.browser.mozilla=!0,e.browser.name="Firefox",e.browser.fullVersion=t.substring(n+8)):(r=t.lastIndexOf(" ")+1)<(n=t.lastIndexOf("/"))&&(e.browser.name=t.substring(r,n),e.browser.fullVersion=t.substring(n+1),e.browser.name.toLowerCase()==e.browser.name.toUpperCase()&&(e.browser.name=navigator.appName)),(a=e.browser.fullVersion.indexOf(";"))!=-1&&(e.browser.fullVersion=e.browser.fullVersion.substring(0,a)),(a=e.browser.fullVersion.indexOf(" "))!=-1&&(e.browser.fullVersion=e.browser.fullVersion.substring(0,a)),e.browser.majorVersion=parseInt(""+e.browser.fullVersion,10),isNaN(e.browser.majorVersion)&&(e.browser.fullVersion=""+parseFloat(navigator.appVersion),e.browser.majorVersion=parseInt(navigator.appVersion,10)),e.browser.version=e.browser.majorVersion}}(jQuery),function(e){e.fn.extend({autocomplete:function(t,r){var n="string"==typeof t;return r=e.extend({},e.Autocompleter.defaults,{url:n?t:null,data:n?null:t,delay:n?e.Autocompleter.defaults.delay:10,max:r&&!r.scroll?10:150},r),r.highlight=r.highlight||function(e){return e},r.formatMatch=r.formatMatch||r.formatItem,this.each(function(){new e.Autocompleter(this,r)})},result:function(e){return this.on("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")}}),e.Autocompleter=function(t,r){function n(){var e=A.activeItem();w.val(e.result)}function a(){var n=A.selected();if(!n)return!1;var a=n.result;if(C=a,r.multiple){var o=i(w.val());if(o.length>1){var s,l=r.multipleSeparator.length,u=e(t).selection().start,f=0;e.each(o,function(e,t){return f+=t.length,u<=f?(s=e,!1):void(f+=l)}),o[s]=a,a=o.join(r.multipleSeparator)}a+=r.multipleSeparator}return w.val(a),c(),w.trigger("result",[n.data,n.value]),!0}function o(e,t){if(g==b.DEL)return void A.hide();var n=w.val();(t||n!=C)&&(C=n,n=s(n),n.length>=r.minChars?(w.addClass(r.loadingClass),r.matchCase||(n=n.toLowerCase()),h(n,f,c)):(m(),A.hide()))}function i(t){return t?r.multiple?e.map(t.split(r.multipleSeparator),function(r){return e.trim(t).length?e.trim(r):null}):[e.trim(t)]:[""]}function s(n){if(!r.multiple)return n;var a=i(n);if(1==a.length)return a[0];var o=e(t).selection().start;return a=i(o==n.length?n:n.replace(n.substring(o),"")),a[a.length-1]}function l(n,a){r.autoFill&&s(w.val()).toLowerCase()==n.toLowerCase()&&g!=b.BACKSPACE&&(w.val(w.val()+a.substring(s(C).length)),e(t).selection(C.length,C.length+a.length))}function u(){clearTimeout(d),d=setTimeout(c,200)}function c(){A.visible();A.hide(),clearTimeout(d),m(),r.mustMatch&&w.search(function(e){if(!e)if(r.multiple){var t=i(w.val()).slice(0,-1);w.val(t.join(r.multipleSeparator)+(t.length?r.multipleSeparator:""))}else w.val(""),w.trigger("result",null)})}function f(e,t){t&&t.length&&V?(m(),A.display(t,e),l(e,t[0].value),A.show()):c()}function h(n,a,o){r.matchCase||(n=n.toLowerCase());var i=x.load(n);if(i&&i.length)a(n,i);else if("string"==typeof r.url&&r.url.length>0){var l={timestamp:+new Date};e.each(r.extraParams,function(e,t){l[e]="function"==typeof t?t():t}),e.ajax({mode:"abort",port:"autocomplete"+t.name,dataType:r.dataType,url:r.url,data:e.extend({q:s(n),limit:r.max},l),success:function(e){if(null==e||""==e||0==e.length)return void u();var t=r.parse&&r.parse(e)||p(e);x.add(n,t),a(n,t)}})}else A.emptyList(),o(n)}function p(t){for(var n=[],a=t.split(r.lineSeparator),o=0;o<a.length;o++){var i=e.trim(a[o]);i&&(i=i.split(r.cellSeparator),n[n.length]={data:i,value:i[0],result:r.formatResult&&r.formatResult(i,i[0])||i[0]})}return n}function m(){w.removeClass(r.loadingClass)}var d,g,v,b={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},w=e(t).attr("autocomplete","off").addClass(r.inputClass),C="",x=e.Autocompleter.Cache(r),V=0,T={mouseDownOnSelect:!1},A=e.Autocompleter.Select(r,t,a,T);e.browser.opera&&e(t.form).on("submit.autocomplete",function(){if(v)return v=!1,!1}),w.on((e.browser.opera?"keypress":"keydown")+".autocomplete",function(t){switch(V=1,g=t.keyCode,t.keyCode){case b.UP:t.preventDefault(),A.visible()?(A.prev(),n()):o(0,!0);break;case b.DOWN:t.preventDefault(),A.visible()?(A.next(),n()):o(0,!0);break;case b.PAGEUP:t.preventDefault(),A.visible()?A.pageUp():o(0,!0);break;case b.PAGEDOWN:t.preventDefault(),A.visible()?A.pageDown():o(0,!0);break;case r.multiple&&","==e.trim(r.multipleSeparator)&&b.COMMA:case b.TAB:case b.RETURN:if(a())return t.preventDefault(),v=!0,!1;break;case b.ESC:A.hide();break;default:clearTimeout(d),d=setTimeout(o,r.delay)}}).focus(function(){V++}).blur(function(){V=0,T.mouseDownOnSelect||u()}).click(function(){++V>1&&!A.visible()&&o(0,!0)}).on("search",function(){function t(e,t){var n;if(t&&t.length)for(var a=0;a<t.length;a++)if(t[a].result.toLowerCase()==e.toLowerCase()){n=t[a];break}"function"==typeof r?r(n):w.trigger("result",n&&[n.data,n.value])}var r=arguments.length>1?arguments[1]:null;e.each(i(w.val()),function(e,r){h(r,t,t)})}).on("flushCache",function(){x.flush()}).on("setOptions",function(){e.extend(r,arguments[1]),"data"in arguments[1]&&x.populate()}).on("unautocomplete",function(){A.unbind(),w.unbind(),e(t.form).unbind(".autocomplete")}).on("input",function(){o(0,!1)})},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",searchBar:e("SearchBar2"),minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,lineSeparator:"\n",cellSeparator:"|",tips:function(e){return e[0]},multiple:!1,multipleSeparator:", ",highlight:function(e,t){return e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<font color='red'>$1</font>")},setHighlight:function(e,t){var r=[];return r[0]=e,r[1]=t,r},scroll:!0,scrollHeight:180},e.Autocompleter.Cache=function(t){function r(e,r){t.matchCase||(e=e.toLowerCase());var n=e.indexOf(r);return"word"==t.matchContains&&(n=e.toLowerCase().search("\\b"+r.toLowerCase())),n!=-1&&(0==n||t.matchContains)}function n(e,r){s>t.cacheLength&&o(),i[e]||s++,i[e]=r}function a(){if(!t.data)return!1;var r={},a=0;t.url||(t.cacheLength=1),r[""]=[];for(var o=0,i=t.data.length;o<i;o++){var s=t.data[o];s="string"==typeof s?[s]:s;var l=t.formatMatch(s,o+1,t.data.length);if(l!==!1){var u=l.charAt(0).toLowerCase();r[u]||(r[u]=[]);var c={value:l,data:s,result:t.formatResult&&t.formatResult(s)||l};r[u].push(c),a++<t.max&&r[""].push(c)}}e.each(r,function(e,r){t.cacheLength++,n(e,r)})}function o(){i={},s=0}var i={},s=0;return setTimeout(a,25),{flush:o,add:n,populate:a,load:function(n){if(!t.cacheLength||!s)return null;if(!t.url&&t.matchContains){var a=[];for(var o in i)if(o.length>0){var l=i[o];e.each(l,function(e,t){r(t.value,n)&&a.push(t)})}return a}if(i[n])return i[n];if(t.matchSubset)for(var u=n.length-1;u>=t.minChars;u--){var l=i[n.substr(0,u)];if(l){var a=[];return e.each(l,function(e,t){r(t.value,n)&&(a[a.length]=t)}),a}}return null}}},e.Autocompleter.Select=function(t,r,n,a){function o(){b&&(searchBar=t.searchBar,p=e("<div/>").hide().addClass(t.resultsClass).css("position","absolute"),null!=searchBar&&searchBar.length>0?p.appendTo(searchBar):p.appendTo(document.body),m=e("<ul/>").appendTo(p).mouseover(function(t){i(t).nodeName&&"LI"==i(t).nodeName.toUpperCase()&&(g=e("li",m).removeClass(d.ACTIVE).index(i(t)),e(i(t)).addClass(d.ACTIVE))}).click(function(t){return e(i(t)).addClass(d.ACTIVE),n(),r.focus(),!1}).mousedown(function(){a.mouseDownOnSelect=!0}).mouseup(function(){a.mouseDownOnSelect=!1}),t.width>0&&p.css("width",t.width),b=!1)}function i(e){for(var t=e.target;t&&"LI"!=t.tagName;)t=t.parentNode;return t?t:[]}function s(e){f.slice(g,g+1).removeClass(d.ACTIVE),l(e);var r=f.slice(g,g+1).addClass(d.ACTIVE);if(t.scroll){var n=0;f.slice(0,g).each(function(){n+=this.offsetHeight}),n+r[0].offsetHeight-m.scrollTop()>m[0].clientHeight?m.scrollTop(n+r[0].offsetHeight-m.innerHeight()):n<m.scrollTop()&&m.scrollTop(n)}}function l(e){g+=e,g<0?g=f.size()-1:g>=f.size()&&(g=0)}function u(e){return t.max&&t.max<e?t.max:e}function c(){m.empty();for(var r=u(h.length),n=0;n<r;n++)if(h[n]){var a=t.formatItem(h[n].data,n+1,r,h[n].value,v);if(a!==!1){var o=e("<li/>").html(t.highlight(a,v)).addClass(n%2==0?"ac_even":"ac_odd").attr("title",t.tips(h[n].data)).appendTo(m)[0];e.data(o,"ac_data",h[n])}}f=m.find("li"),t.selectFirst&&(f.slice(0,1).addClass(d.ACTIVE),g=0),e.fn.bgiframe&&m.bgiframe()}var f,h,p,m,d={ACTIVE:"ac_over"},g=-1,v="",b=!0;return{display:function(e,t){o(),h=e,v=t,c()},next:function(){s(1)},prev:function(){s(-1)},pageUp:function(){s(0!=g&&g-8<0?-g:-8)},pageDown:function(){s(g!=f.size()-1&&g+8>f.size()?f.size()-1-g:8)},hide:function(){p&&p.hide(),f&&f.removeClass(d.ACTIVE),g=-1},visible:function(){return p&&p.is(":visible")},current:function(){return this.visible()&&(f.filter("."+d.ACTIVE)[0]||t.selectFirst&&f[0])},show:function(){var n,a,o,i=e(r).offset();if(e.browser.msie?(n=-2,a=-2,o=4):(n=0,a=0,o=2),null!=t.searchBar&&t.searchBar.length>0?p.show():p.css({width:"string"==typeof t.width||t.width>0?t.width:e(r).width()+o,top:i.top+r.offsetHeight+n,left:i.left+a}).show(),t.scroll&&(m.scrollTop(0),m.css({maxHeight:t.scrollHeight,overflow:"auto"}),e.browser.msie&&"undefined"==typeof document.body.style.maxHeight)){var s=0;f.each(function(){s+=this.offsetHeight});var l=s>t.scrollHeight;m.css("height",l?t.scrollHeight:s),l||f.width(m.width()-parseInt(f.css("padding-left"))-parseInt(f.css("padding-right")))}},activeItem:function(){var t=f.slice(g,g+1).addClass(d.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},selected:function(){var t=f&&f.filter("."+d.ACTIVE).removeClass(d.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){m&&m.empty()},unbind:function(){p&&p.remove()}}},e.fn.selection=function(e,t){if(void 0!==e)return this.each(function(){if(this.createTextRange){var r=this.createTextRange();void 0===t||e==t?(r.move("character",e),r.select()):(r.collapse(!0),r.moveStart("character",e),r.moveEnd("character",t),r.select())}else this.setSelectionRange?this.setSelectionRange(e,t):this.selectionStart&&(this.selectionStart=e,this.selectionEnd=t)});var r=this[0];if(r.createTextRange){var n=document.selection.createRange(),a=r.value,o="<->",i=n.text.length;n.text=o;var s=r.value.indexOf(o);return r.value=a,this.selection(s,s+i),{start:s,end:s+i}}return void 0!==r.selectionStart?{start:r.selectionStart,end:r.selectionEnd}:void 0}}(jQuery);