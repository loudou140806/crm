!function(e){"use strict";function n(e){return function(n){if(this===n.target)return e.apply(this,arguments)}}var o=function(e,n){this.init(e,n)};o.prototype={constructor:o,init:function(n,o){if(this.$element=e(n),this.options=e.extend({},e.fn.modalmanager.defaults,this.$element.data(),"object"==typeof o&&o),this.stack=[],this.backdropCount=0,this.options.resize){var t,a=this;e(window).on("resize.modal",function(){t&&clearTimeout(t),t=setTimeout(function(){for(var e=0;e<a.stack.length;e++)a.stack[e].isShown&&a.stack[e].layout()},10)})}},createModal:function(n,o){e(n).modal(e.extend({manager:this},o))},appendModal:function(o){this.stack.push(o);var t=this;o.$element.on("show.modalmanager",n(function(n){var a=function(){o.isShown=!0;var n=e.support.transition&&o.$element.hasClass("fade");t.$element.toggleClass("modal-open",t.hasOpenModal()).toggleClass("page-overflow",e(window).height()<t.$element.height()),o.$parent=o.$element.parent(),o.$container=t.createContainer(o),o.$element.appendTo(o.$container),t.backdrop(o,function(){o.$element.show(),n&&o.$element[0].offsetWidth,o.layout(),o.$element.addClass("in").attr("aria-hidden",!1);var a=function(){t.setFocus(),o.$element.trigger("shown")};n?o.$element.one(e.support.transition.end,a):a()})};o.options.replace?t.replace(a):a()})),o.$element.on("hidden.modalmanager",n(function(n){if(t.backdrop(o),o.$element.parent().length)if(o.$backdrop){var a=e.support.transition&&o.$element.hasClass("fade");a&&o.$element[0].offsetWidth,e.support.transition&&o.$element.hasClass("fade")?o.$backdrop.one(e.support.transition.end,function(){o.destroy()}):o.destroy()}else o.destroy();else t.destroyModal(o)})),o.$element.on("destroyed.modalmanager",n(function(e){t.destroyModal(o)}))},getOpenModals:function(){for(var e=[],n=0;n<this.stack.length;n++)this.stack[n].isShown&&e.push(this.stack[n]);return e},hasOpenModal:function(){return this.getOpenModals().length>0},setFocus:function(){for(var e,n=0;n<this.stack.length;n++)this.stack[n].isShown&&(e=this.stack[n]);e&&e.focus()},destroyModal:function(e){e.$element.off(".modalmanager"),e.$backdrop&&this.removeBackdrop(e),this.stack.splice(this.getIndexOfModal(e),1);var n=this.hasOpenModal();this.$element.toggleClass("modal-open",n),n||this.$element.removeClass("page-overflow"),this.removeContainer(e),this.setFocus()},getModalAt:function(e){return this.stack[e]},getIndexOfModal:function(e){for(var n=0;n<this.stack.length;n++)if(e===this.stack[n])return n},replace:function(o){for(var t,a=0;a<this.stack.length;a++)this.stack[a].isShown&&(t=this.stack[a]);t?(this.$backdropHandle=t.$backdrop,t.$backdrop=null,o&&t.$element.one("hidden",n(e.proxy(o,this))),t.hide()):o&&o()},removeBackdrop:function(e){e.$backdrop.remove(),e.$backdrop=null},createBackdrop:function(n,o){var t;return this.$backdropHandle?(t=this.$backdropHandle,t.off(".modalmanager"),this.$backdropHandle=null,this.isLoading&&this.removeSpinner()):t=e(o).addClass(n).appendTo(this.$element),t},removeContainer:function(e){e.$container.remove(),e.$container=null},createContainer:function(o){var a;return a=e('<div class="modal-scrollable">').css("z-index",t("modal",this.getOpenModals().length)).appendTo(this.$element),o&&"static"!=o.options.backdrop?a.on("click.modal",n(function(e){o.hide()})):o&&a.on("click.modal",n(function(e){o.attention()})),a},backdrop:function(n,o){var a=n.$element.hasClass("fade")?"fade":"",i=n.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(n.isShown&&i){var s=e.support.transition&&a&&!this.$backdropHandle;n.$backdrop=this.createBackdrop(a,n.options.backdropTemplate),n.$backdrop.css("z-index",t("backdrop",this.getOpenModals().length)),s&&n.$backdrop[0].offsetWidth,n.$backdrop.addClass("in"),this.backdropCount+=1,s?n.$backdrop.one(e.support.transition.end,o):o()}else if(!n.isShown&&n.$backdrop){n.$backdrop.removeClass("in"),this.backdropCount-=1;var r=this;e.support.transition&&n.$element.hasClass("fade")?n.$backdrop.one(e.support.transition.end,function(){r.removeBackdrop(n)}):r.removeBackdrop(n)}else o&&o()},removeSpinner:function(){this.$spinner&&this.$spinner.remove(),this.$spinner=null,this.isLoading=!1},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove(),this.$backdropHandle=null,this.removeSpinner()},loading:function(n){if(n=n||function(){},this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",e(window).height()<this.$element.height()),this.isLoading)if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var o=this;e.support.transition?this.$backdropHandle.one(e.support.transition.end,function(){o.removeLoading()}):o.removeLoading()}else n&&n(this.isLoading);else{this.$backdropHandle=this.createBackdrop("fade",this.options.backdropTemplate),this.$backdropHandle[0].offsetWidth;var a=this.getOpenModals();this.$backdropHandle.css("z-index",t("backdrop",a.length+1)).addClass("in");var i=e(this.options.spinner).css("z-index",t("modal",a.length+1)).appendTo(this.$element).addClass("in");this.$spinner=e(this.createContainer()).append(i).on("click.modalmanager",e.proxy(this.loading,this)),this.isLoading=!0,e.support.transition?this.$backdropHandle.one(e.support.transition.end,n):n()}}};var t=function(){var n,o={};return function(t,a){if("undefined"==typeof n){var i=e('<div class="modal hide" />').appendTo("body"),s=e('<div class="modal-backdrop hide" />').appendTo("body");o.modal=+i.css("z-index"),o.backdrop=+s.css("z-index"),n=o.modal-o.backdrop,i.remove(),s.remove(),s=i=null}return o[t]+n*a}}();e.fn.modalmanager=function(n,t){return this.each(function(){var a=e(this),i=a.data("modalmanager");i||a.data("modalmanager",i=new o(this,n)),"string"==typeof n&&i[n].apply(i,[].concat(t))})},e.fn.modalmanager.defaults={backdropLimit:999,resize:!0,spinner:'<div class="loading-spinner fade" style="width:32px;margin-left:-16px; "><img src="data:image/gif;base64,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"></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},e.fn.modalmanager.Constructor=o,e(function(){e(document).off("show.bs.modal").off("hidden.bs.modal")})}(jQuery);