<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"><meta name="keywords" content="百度地图,百度地图API，百度地图自定义工具，百度地图所见即所得工具"><meta name="description" content="百度地图API自定义地图，帮助用户在可视化操作下生成百度地图"><title>百度地图API自定义地图</title><style>body,html{margin:0;padding:0;overflow:hidden}</style><script src="http://api.map.baidu.com/api?key=&v=2.0&ak=6b6c1a67eaa7db1ca6d6da28e590e343&services=true"></script></head><body onload="initMap()"><div style="width:697px;height:550px;border:#ccc solid 1px" id="dituContent"></div></body><script>function getParam(e){return location.href.match(new RegExp("[?#&]"+e+"=([^?#&]+)","i"))?RegExp.$1:""}function initMap(){if(window.BMap){var e=document.getElementById("dituContent");e.style.width=widthParam+"px",e.style.height=heightParam+"px",createMap(),setMapEvent(),addMapControl();var a=markersParam.split(","),r=new BMap.Point(a[0],a[1]);marker=new BMap.Marker(r),marker.enableDragging(),map.addOverlay(marker),iframe&&UM&&editor?setMapListener():document.focus()}}function createMap(){map=new BMap.Map("dituContent");var e=centerParam.split(","),a=new BMap.Point(parseFloat(e[0]),parseFloat(e[1]));map.centerAndZoom(a,parseInt(zoomParam))}function setMapEvent(){map.enableDragging(),map.enableScrollWheelZoom(),map.enableDoubleClickZoom(),map.enableKeyboard()}function addMapControl(){var e=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});map.addControl(e);var a=new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});map.addControl(a);var r=new BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});map.addControl(r)}function setMapListener(){function e(){var e=map.getZoom(),r=map.getCenter(),t=window.marker.P;iframe.src=iframe.src.replace(new RegExp("([?#&])center=([^?#&]+)","i"),"$1center="+r.lng+","+r.lat).replace(new RegExp("([?#&])markers=([^?#&]+)","i"),"$1markers="+t.lng+","+t.lat).replace(new RegExp("([?#&])zoom=([^?#&]+)","i"),"$1zoom="+e),editor.fireEvent("saveScene"),a(editor)}function a(){r||(r=setTimeout(function(){editor.fireEvent("savescene"),editor.fireEvent("contentchange"),r=null},1e3))}var r;map.addEventListener("moveend",e),map.addEventListener("zoomend",e),marker.addEventListener("dragend",e)}function getSelfIframe(){var e=parent.document.getElementsByTagName("iframe");for(var a in e)if(e[a].contentWindow==window)return e[a];return null}function getEditor(){for(var e=iframe.parentNode;e&&e.tagName&&"body"!=e.tagName.toLowerCase();){if(e.className&&e.className.indexOf("edui-body-container")!=-1)return UM.getEditor(e.id);e=e.parentNode}return null}var map,marker,centerParam=getParam("center"),zoomParam=getParam("zoom"),widthParam=getParam("width"),heightParam=getParam("height"),markersParam=getParam("markers"),markerStylesParam=getParam("markerStyles"),iframe=getSelfIframe(),UM=parent.UM,editor=getEditor()</script></html>